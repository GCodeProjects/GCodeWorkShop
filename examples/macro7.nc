%
O4113 (MACRO EXAMPLE 1)

{BEGIN}

{$DRILLVC=100}    (CUTTING SPEED FOR DRILLS)
{$TAPVC=20}       (CUTTING FEED FOR TAPS)


{$TOOL1=1}        (1 TOOL NO) 
{$TOOLDIA1=9}     (1 TOOL DIA) 
{$TOOLF1=0.25}    (1 TOOL FEED)

{$DIA1=200}       (BOLT HOLES DIA 1)
{$FIRSTANG1=0}    (FIRST HOLE ANGLE)
{$HOLES1=8}       (NO OF HOLES)

{$BASEFACE1=-30.} (BASE FACE FOR DEPTH 1)
{$DEPTH1=20}      (CUTING DEPTH 1)


{$TOOL2=10}       (2 TOOL NO) 
{$TOOLDIA2=6.8}   (2 TOOL DIA)
{$TOOLF2=0.2}     (2 TOOL FEED)

{$TOOL3=5}        (3 TOOL NO) 
{$TOOLDIA3=8}     (3 TOOL DIA) 
{$TOOLF3=1.25}    (3 TOOL FEED)

{$DIA2=100}       (BOLT HOLES DIA 2)
{$FIRSTANG2=30}   (FIRST HOLE ANGLE)
{$HOLES2=6}       (NO OF HOLES)

{$BASEFACE2=0.}   (BASE FACE FOR DEPTH 2)
{$DEPTH2=20}      (CUTING DEPTH 2)


{END}


{BEGIN_SUBS}
100 (BOLT CIRCLE) 
B=360/G
FOR X=1 TO G
C=A+(B*(X-1))
PRINT "X", F*COS C," Y", F*SIN C 
NEXT 
RETURN
{END_SUBS}

G21
G17 G80 G91 G40
G28 Z0
G90 G10 L2 P1 J1 Z-491.7 R0.0
M1
M31
N1 T{$TOOL1} M6 (T{$TOOL1} - {$TOOLDIA1}MM DRILL)
G0 G90 G54 X{COS($FIRSTANG1)*($DIA1/2)} Y{SIN($FIRSTANG1)*($DIA1/2)} S{TRUNC(($DRILLVC*1000)/(PI(0)*$TOOLDIA1))} M13 T{$TOOL2}
G43 Z150. H{$TOOL1}
G81 G98 Z{$BASEFACE1-$DEPTH1} R{$BASEFACE1+5} F{TRUNC((($DRILLVC*1000)/(3.14*$TOOLDIA1))*$TOOLF1)} L0
{BEGIN_BASIC}
A={$FIRSTANG1} 
F={$DIA1/2}
G={$HOLES1}
GOSUB 100
END
{END_BASIC}
G80 Z150. M9
M1
N4 T{$TOOL2} M6 (T{$TOOL2} - {$TOOLDIA2}MM DRILL)
G0 G90 G54 X{COS($FIRSTANG2)*($DIA2/2)} Y{SIN($FIRSTANG2)*($DIA2/2)} S{TRUNC(($DRILLVC*1000)/(PI(0)*$TOOLDIA2))} M13 T{$TOOL3}
G43 Z150. H{$TOOL2}
G81 G98 Z{$BASEFACE2-($DEPTH2+3)} R{$BASEFACE2+5} F{TRUNC((($DRILLVC*1000)/(3.14*$TOOLDIA2))*$TOOLF2)} L0
{BEGIN_BASIC}
A={$FIRSTANG2} 
F={$DIA2/2}
G={$HOLES2}
GOSUB 100
END
{END_BASIC}
G80 Z150. M9
M1
N3 T{$TOOL3} M6 (T{$TOOL3} - M{$TOOLDIA3} TAP)
G0 G90 G54 X{COS($FIRSTANG2)*($DIA2/2)} Y{SIN($FIRSTANG2)*($DIA2/2)} S{TRUNC(($TAPVC*1000)/(PI(0)*$TOOLDIA3))} M13
G43 Z150. H{$TOOL3}
G93
G84 G98 Z{$BASEFACE2-$DEPTH2} R{$BASEFACE2+6} F{$TOOLF3} L0
{BEGIN_BASIC}
A={$FIRSTANG2} 
F={$DIA2/2}
G={$HOLES2}
GOSUB 100
END
{END_BASIC}
G94
G80 Z150. M9
M1
G91 G30 Z0.
M99
%